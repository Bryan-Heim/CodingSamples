# Usage Instructions
IMPORTANT NOTE: This application requires Java 1.8 in order to function properly.

## Pre-required Key Setup
Before starting the system, you must generate the RSA keys used throughout the application using the KeyGenerator program given.
For the group server and file server you must create the folder SystemKeys in the src directory with the RunGroupServer/RunFileServer class files and add 
the a group server or file server key-pair generated by the KeyGenerator to the SystemKeys directory. You must also make a UserPubKeys directory in the same
 location as well for both server types that will be used to store all public keys of the users. Each user who wants to interact with the system must make a user key-pair using the KeyGenerator
 and keep their newly created keys in the MyKeys directory that is located in the same directory as the ClientApplication class file.
The user must then obtain a copy of the group server public key and the file server they wish to access' public key and place these
two PEM files into the MyKeys directory. Next, both the group server and file server/s must obtain the public key PEM files of
all of the users that will be interacting with the system and place these files into the UserPubKeys directory. Finally the file server must have add the group servers' public key to their SystemKeys directory as well. At each step of transferring
public keys, you can "call" to verify that the public key is correct and has not been tampered with before placing them into the 
appropriate directories. Now the system is ready to run.

## Running the Group Server

To start the Group Server:
 - Enter the directory containing `RunGroupServer.class`
 - Type `java RunGroupServer [port number]`

Note that the port number argument to `RunGroupServer` is optional.  This argument specifies the port that the Group Server will listen to.  If unspecified, it defaults to port 8765.

When the group server is first started, there are no users or groups. Since there must be an administer of the system, the user is prompted via the console to enter a username. This name becomes the first user and is a member of the *ADMIN* group.  No groups other than *ADMIN* will exist.

## Running the File Server

To start the File Server:
 - Enter the directory containing `RunFileServer.class`
 - Type `java RunFileServer [port number]`

Note that the port number argument to `RunFileServer is optional.  This argument speficies the port that the File Server will list to. If unspecified, it defaults to port 4321.

The file server will create a shared_files inside the working directory if one does not exist. The file server is now online.

## Resetting the Group or File Server

To reset the Group Server, delete the file `UserList.bin`

To reset the File Server, delete the `FileList.bin` file and the `shared_files/` directory.

## Running Client Application

To start the Client Application:
- Run both the Group Server and File Server by using the above instructions.
- Enter the directory containing 'ClientApplication.class'
- Type 'java ClientApplication' in the command prompt.

Once started, the client application will prompt you for the name of the group server to which you are connecting.
Type localhost if the machine you are running the group server on is also the one that you are running the client application on.

After supplying the name of the group server, you will be prompted for a port number to use in connecting to the group server. (default port # is 8765)
Assuming no errors in connecting to the group server, you will now be prompted to enter your username.  By supplying an approved username, the server will validate your access.
Assuming that the username entered has been validated by the server, you will now face a prompt similar to the one you see below.

Accessing a file server? (y/n): 

If during this session, you wish to access a file server, you can now enter "y" to that prompt.  If not, enter "n".
If your answer is yes, you will then see the following prompt:

Enter the file server's IP address: 

This prompt is for the file server's ipv4 address, which can be obtained by opening a command prompt on the file server, and typing "ipconfig".  After entering this command,
the command prompt should display the ipv4 address along with a bunch of other information.  Simply type the ipv4 address that appears there, and press enter.
After obtaining the ipv4 address of the file server, and answering that prompt, you will then be prompted for the port # of the file server that you wish to access.

Enter the file server's port number:

Obviously, enter the port # that you are using to connect to the file server that you just got the ipv4 address for.  The default port # is 4321.
Important note: the previous 3 prompt's will be displayed again if you exit the file server, or group server.  It is imperative to answer these prompts correctly
to properly connect to any file server.  If the ipv4 address of the file server is incorrect, your token will be invalid for use on that server.
After answering that prompt, the following prompt is displayed:

Press 1 to use the group server.
Press 2 to use a file server.
Press 3 to exit this client.


By entering the corresponding keys, you will either
- Enter the group server application
- Enter the file server application, or
- Exit the client application

By entering 1, you will now enter the group server.  Here you will find a menu that will allow you to perform some of the group based functionallity that is required for this project.
That menu is the following:

  CU - Create User
  DU - Delete User
  CG - Create Group
  DG - Delete Group
  LM - List Group Members
  UA - Add User to Group
  UD - Delete User from Group
  EX - Terminate the current session.

By entering the corresponding 2-letter codes into the console, you will be able to use these features.

###Create User
- Enter CU in the console once presented with the above menu.
- You will now be prompted to enter a username to create.
- Assuming that you have ADMIN priveledges, the server will create a user with the name specified in step 2.

###Delete User
- Enter DU in the console once presented with the above menu.
- You will now be prompted to enter the username of the user which you are trying to delete
- Assuming that you have the appropriate priveledges, the server will delete the user with the name specified in step 2.

###Create Group
- Enter CG in the console once presented with the above menu.
- You will now be prompted to enter the name of the new group.
- Assuming that you have the appropriate priveledges, the server will create a new group with the name specified in step 2.  You will be the only user in this group once created.

###Delete Group
- Enter DG in the console once presented with the above menu.
- You will now be prompted to enter the name of the group which you want to delete.
- Assuming that you have the appropriate priveledges, the server will delete the group with the name specified in step 2.

###List Group Members
- Enter LM in the console once presented with the above menu.
- You will now be prompted to enter the name of the group which you want the list of members for.
- The server will print out a list of group members in the group specified by you in step 2.

###Add User to Group
- Enter UA in the console once presented with the above menu.
- You will now be prompted for the username of the user whom you wish to add to a group specified in step 3.
- You will now be prompted for the group to which you want to add the user you specified in step 2.
- Assuming that you have the appropriate priveledges, the server will add the specified user to the specified group.

###Delete User from Group
- Enter UD in the console once presented with the above menu.
- You will now be prompted for the username of the user which you wish to remove from a group specified in step 3.
- You will now be prompted for the group to which you want to delete the user specified in step 2.
- Assuming that you have the appropriate priveledges, the server will remove the specified user from the specified group.

###Terminate the current session.
- Enter EX in the console once presented with the above menu.
- By entering EX, you will now be kicked out of the group server, and sent back to the client application.
- You will now be presented again with the following menu:


Press 1 to use the group server.
Press 2 to use a file server.
Press 3 to exit this client.


By entering 2 you will now be prompted to enter the name of the file server to which you wish to connect.
Enter "localhost" if the machine that you are running the file server on is the same machine that you are running the client application on.
After entering the name of the server, you will be prompted to enter the port number you wish to use to access this file server. (Default port # is 4321)
Assuming that there are no connection issues, you will find a menu that will allow you to perform some of the file based functionallity that is required for this project.
That menu is the following:


Enter 1 if you would like to upload a file.
Enter 2 if you would like to delete a file.
Enter 3 if you would like to list all files that you have access to.
Enter 4 if you would like to download a file.
Enter 5 if you would like to exit this client.


By entering the corresponding numbers into the console, you we be able to use some of these features, again assuming you have the priveledge to do so.

###Upload a File
- Enter 1 in the console once presented with the above menu.
- You will now be prompted for the relative path of the file that you wish to upload.
- You will now be prompted to rename the file on the server.
- You will now be prompted to enter the name of the group to which you would like to share this document with.
- Assuming everything runs smoothly, the file will now be uploaded onto the server, under the specified group name.

###Delete a File
- Enter 2 in the console once presented with the above menu.
- You will now be prompted for the name of the file that you want to delete.
- Assuming that everything runs smoothly, the specified file will now be deleted from the server.

###List Files
- Enter 3 in the console once presented with the above menu.
- The files that you are eligable to interact with, due to being a member of the corresponding groups, will now be displayed in the command prompt.

###Download a File
- Enter 4 in the console once presented with the above menu.
- You will now be prompted for the name of the file which you wish to download.
- You will now be prompted to rename the file for storage onto your PC.
- Assuming that everything runs smoothly, the specified file will now be stored on your PC under the specified renaming.

###Exit Client
- Enter 5 in the console once presented with the above menu.
- You will now be taken out of the file server, and back into the client application.
- Once there, the following menu will be displayed again:


Press 1 to use the group server.
Press 2 to use a file server.
Press 3 to exit this client.


You can again choose any of the 3 options.  If 3 is entered into the keyboard, the client will now close.






Implementation notes:  File operations only work if groups are created AND the client application is relaunched afterwards.  For example, say you log into the client application and make a new group named group1.
Being that you are the creator of group1 you are now allowed to upload files to that group.  However, for some reason there is an annoying bug that prevents you from exiting the group server, and going directly into the file
server to do this.  Instead, you must exit the group server, by entering EX, then exit the client application, by entering 3.  After that is done, you will need to relaunch the client application and then enter the file server
to upload files to group1.  I'm not sure what this issue is, maybe something with the token.  Not entirely sure.